<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <template id="picking_external_layout">
            <!-- Multicompany -->
            <t t-if="o and 'company_id' in o">
                <t t-set="company" t-value="o.company_id"></t>
            </t>
            <t t-if="not o or not 'company_id' in o">
                <t t-set="company" t-value="res_company"></t>
            </t>
            <t t-call="jakc_stock_report.picking_external_layout_header"/>
            <t t-raw="0" />
            <t t-call="jakc_stock_report.picking_external_layout_footer"/>
        </template>

        <template id="dropshipping_external_layout">
            <!-- Multicompany -->
            <t t-if="o and 'company_id' in o">
                <t t-set="company" t-value="o.company_id"></t>
            </t>
            <t t-if="not o or not 'company_id' in o">
                <t t-set="company" t-value="res_company"></t>
            </t>
            <t t-call="jakc_stock_report.dropshipping_external_layout_header"/>
            <t t-raw="0" />
            <t t-call="jakc_stock_report.picking_external_layout_footer"/>
        </template>

        <template id="checking_external_layout">
            <!-- Multicompany -->
            <t t-if="o and 'company_id' in o">
                <t t-set="company" t-value="o.company_id"></t>
            </t>
            <t t-if="not o or not 'company_id' in o">
                <t t-set="company" t-value="res_company"></t>
            </t>
            <t t-call="jakc_stock_report.checking_external_layout_header"/>
            <t t-raw="0" />
            <t t-call="jakc_stock_report.checking_external_layout_footer"/>
        </template>

        <template id="picking_external_layout_header">
            <div class="header">
                <div class="row">
                    <div class="col-xs-6" style="padding:0;margin:0;">
                        <div class="row">
                            <div class="col-xs-3">
                                <div class="row">
                                    <span style="font-size:6px"><![CDATA[&nbsp;]]></span>
                                </div>
                                 <div class="row">
                                    <span style="font-size:6px"><![CDATA[&nbsp;]]></span>
                                </div>
                                <img src='/jakc_account_invoice_report/static/src/img/bcp_logo.jpeg' style="max-height: 60px;"/>
                            </div>
                            <div class="col-xs-9">
                                <div class="row">
                                    <t t-if="not o.iface_return">
                                        <strong><span>SURAT JALAN</span></strong>
                                    </t>
                                    <t t-if="o.iface_return">
                                        <strong><span>SURAT JALAN RETUR PENJUALAN</span></strong>
                                    </t>
                                </div>
                                <div class="row">
                                    <span t-esc="company.name"/>
                                </div>
                                <div class="row">
                                    <span style="font-size:10px" t-esc="company.street"/>
                                </div>
                                <div class="row">
                                    <span style="font-size:10px">NPWP : </span><span style="font-size:10px" t-esc="company.vat"/>
                                </div>
                                <div class="row">
                                    <span style="font-size:10px">WA1 : </span>
                                    <span style="font-size:10px" t-esc="company.wa1"/>
                                    <span style="font-size:10px"> / WA2 : </span>
                                    <span style="font-size:10px" t-esc="company.wa2"/>
                                </div>
                                <div class="row">
                                    <span style="font-size:10px" t-esc="o.create_uid.name"/>
                                    <span style="font-size:10px"> P-</span><span style="font-size:10px" t-esc="o.printed_number"/> <span style="font-size:10px">/</span> <span style="font-size:10px" class="page"/> <span  style="font-size:10px">of</span> <span style="font-size:10px" class="topage"/>
                                    <span style="font-size:10px">   </span>

                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-5 col-xs-offset-1">
                                <div t-if="o.move_lines and o.move_lines[0].partner_id and o.move_lines[0].partner_id.id != o.partner_id.id">
                                    <span><strong>Delivery Address:</strong></span>
                                    <div t-field="o.move_lines[0].partner_id"
                                         t-field-options='{"widget": "contact", "fields": ["address", "name", "phone", "fax"], "no_marker": true}'/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-6" style="padding:0;margin:0;">
                        <div class="row">
                            <div class="col-xs-4">
                                <t t-if="not o.iface_return">
                                    <span style="font-size:10px"><strong>Tanggal SJ</strong></span>
                                </t>
                                <t t-if="o.iface_return">
                                    <span style="font-size:10px"><strong>Tanggal Retur</strong></span>
                                </t>
                            </div>
                             <div class="col-xs-8">
                                 <span style="font-size:10px" t-field="o.date"/>
                             </div>
                        </div>
                        <div class="row" t-if="o.iface_return">
                            <div class="col-xs-4">
                                <span style="font-size:10px"><strong>No Retur</strong></span>
                            </div>
                             <div class="col-xs-8">
                                 <span style="font-size:10px" t-field="o.name"/>
                             </div>
                        </div>
                        <div class="row" t-if="not o.iface_return">
                            <div class="col-xs-4">
                                <span style="font-size:10px"><strong>No SJ</strong></span>
                            </div>
                             <div class="col-xs-8">
                                 <span style="font-size:10px" t-field="o.name"/><span style="font-size:10px"> / </span><span style="font-size:10px" t-field="o.sale_id.name"/>
                             </div>
                        </div>
                        <div class="row" t-if="o.iface_return">
                            <div class="col-xs-4">
                                <span style="font-size:10px"><strong>No SJ</strong></span>
                            </div>
                             <div class="col-xs-8">
                                 <span style="font-size:10px" t-field="o.origin"/><span style="font-size:10px"> / </span><span style="font-size:10px" t-field="o.sale_id.name"/>
                             </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-4">
                                <span style="font-size:10px"><strong>Pelanggan</strong></span>
                            </div>
                            <div class="col-xs-8">
                                <span style="font-size:10px" t-field="o.partner_id.name"/>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-4">
                                <span style="font-size:10px"><strong>Alamat Kirim</strong></span>
                            </div>
                            <div class="col-xs-8">
                                <t t-if="o.partner_id.street">
                                    <span style="font-size:10px" t-esc="o.partner_id.street"/>
                                </t>
                            </div>
                        </div>
                        <div class="row">
                                <div class="col-xs-4">
                                    <span style="font-size:10px"><strong>Kota / Provinsi</strong></span>
                                </div>
                                <div class="col-xs-8">
                                    <t t-if="o.partner_id.city">
                                        <span style="font-size:10px" t-field="o.partner_id.city"/><span style="font-size:10px"> / </span>
                                    </t>
                                    <t t-if="o.partner_id.state_id">
                                        <span style="font-size:10px" t-field="o.partner_id.state_id"/>
                                    </t>
                                </div>
                        </div>
                    </div>
                </div>
            </div>
        </template>

        <template id="dropshipping_external_layout_header">
            <div class="header">
                <div class="row">
                    <div class="col-xs-6" style="padding:0;margin:0;">
                        <div class="row">
                            <div class="col-xs-12">
                                <span><strong>SURAT JALAN</strong></span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                <span t-field="o.partner_id"/>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-6" style="padding:0;margin:0;">
                        <div class="row">
                            <div class="col-xs-4">
                                <span style="font-size:10px"><strong>Tanggal SJ</strong></span>
                            </div>
                             <div class="col-xs-8">
                                 <span style="font-size:10px" t-field="o.date"/>
                             </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-4">
                                <span style="font-size:10px"><strong>No SJ</strong></span>
                            </div>
                             <div class="col-xs-8">
                                 <span style="font-size:10px" t-field="o.name"/><span style="font-size:10px"> / </span><span style="font-size:10px" t-field="o.sale_id.name"/>
                             </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-4">
                                <span style="font-size:10px"><strong>Alamat Kirim</strong></span>
                            </div>
                            <div class="col-xs-8">
                                <t t-if="o.partner_id.street">
                                    <span style="font-size:10px" t-esc="o.partner_id.street"/>
                                </t>
                            </div>
                        </div>
                        <div class="row">
                                <div class="col-xs-4">
                                    <span style="font-size:10px"><strong>Kota / Provinsi</strong></span>
                                </div>
                                <div class="col-xs-8">
                                    <t t-if="o.partner_id.city">
                                        <span style="font-size:10px" t-field="o.partner_id.city"/><span style="font-size:10px"> / </span>
                                    </t>
                                    <t t-if="o.partner_id.state_id">
                                        <span style="font-size:10px" t-field="o.partner_id.state_id"/>
                                    </t>
                                </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-4">
                               <span style="font-size:10px"><![CDATA[&nbsp;]]></span>
                            </div>
                            <div class="col-xs-8">
                                <span style="font-size:10px" t-esc="o.create_uid.name"/>
                                <span style="font-size:10px"> P-</span><span style="font-size:10px" t-esc="o.printed_dropshipping"/> <span style="font-size:10px">/</span> <span style="font-size:10px" class="page"/> <span  style="font-size:10px">of</span> <span style="font-size:10px" class="topage"/>
                                <span style="font-size:10px">   </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </template>

        <template id="checking_external_layout_header">
            <div class="header">
                <div class="row">
                    <div class="col-xs-6">
                        <div class="row">
                            <h5><strong>LIST CHECK STOCK</strong></h5>
                        </div>
                        <div class="row">
                            <span style="font-size:10px" t-field="o.partner_id"/>
                        </div>
                        <div class="row">
                            <span style="font-size:10px">NO DO : </span><span style="font-size:10px" t-esc="o.name"/><span> / </span><span style="font-size:10px" t-field="o.date"/>
                        </div>
                        <div class="row">
                            <span style="font-size:10px">NO SO : </span><span style="font-size:10px" t-esc="o.origin"/>
                        </div>
                    </div>
                    <div class="col-xs-6">
                            <div class="row">
                                <div class="col-xs-4">
                                    <span style="font-size:10px"><strong>Alamat Kirim</strong></span>
                                </div>
                                <div class="col-xs-8">
                                    <t t-if="o.partner_id.street">
                                        <span style="font-size:10px" t-esc="o.partner_id.street"/>
                                    </t>
                                </div>
                            </div>
                            <div class="row">
                                    <div class="col-xs-4">
                                        <span style="font-size:10px"><strong>Kota / Provinsi</strong></span>
                                    </div>
                                    <div class="col-xs-8">
                                        <t t-if="o.partner_id.city">
                                            <span style="font-size:10px" t-field="o.partner_id.city"/><span style="font-size:10px"> / </span>
                                        </t>
                                        <t t-if="o.partner_id.state_id">
                                            <span style="font-size:10px" t-field="o.partner_id.state_id"/>
                                        </t>
                                    </div>
                            </div>
                    </div>
                </div>
                <div class="row">
                    <table width="100%">
                        <tr>
                            <td align="right">
                                <strong>
                                    <span style="font-size:10px" t-esc="o.create_uid.name"/>
                                    <span style="font-size:10px"> P-</span>
                                    <span style="font-size:10px" t-esc="o.printed_checking"/>
                                    <span style="font-size:10px"> / </span>
                                    <span style="font-size:10px" class="page"/><span  style="font-size:10px"> of </span><span style="font-size:10px" class="topage"/>
                                </strong>
                            </td>
                        </tr>
                    </table>
                </div>

            </div>
        </template>

        <template id="picking_external_layout_footer">
            <div class="footer">
                <div class="row">
                    <table width="100%">
                        <tr style="border-top: 0.5pt solid black;">
                            <td><span style="font-size:6px"><![CDATA[&nbsp;]]></span></td>
                        </tr>
                    </table>
                </div>
                <div class="row">
                    <div class="col-xs-6">
                        <div class="row">
                            <span><![CDATA[&nbsp;]]></span>
                        </div>
                        <div class="row">
                            <div class="col-xs-6">
                                <div class="row">
                                    <span style="font-size:10px"><strong>Hormat Kami</strong></span>
                                </div>
                                <div class="row">
                                    <span><![CDATA[&nbsp;]]></span>
                                </div>
                                <div class="row">
                                    <span><![CDATA[&nbsp;]]></span>
                                </div>
                                <div class="row">
                                   <span><![CDATA[&nbsp;]]></span>
                                </div>
                                <div class="row">
                                   <span><![CDATA[&nbsp;]]></span>
                                </div>
                                <div class="row">
                                    <span style="font-size:10px"><strong>(...................)</strong></span>
                                </div>
                            </div>
                            <div class="col-xs-6">
                                <div class="row">
                                    <span style="font-size:10px"><strong>Penerima</strong></span>
                                </div>
                                 <div class="row">
                                    <span><![CDATA[&nbsp;]]></span>
                                </div>
                                <div class="row">
                                    <span><![CDATA[&nbsp;]]></span>
                                </div>
                                <div class="row">
                                    <span><![CDATA[&nbsp;]]></span>
                                </div>
                                <div class="row">
                                   <span><![CDATA[&nbsp;]]></span>
                                </div>
                                <div class="row">
                                    <span style="font-size:10px"><strong>(...................)</strong></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-6">
                        <div class="row">
                            <div class="col-xs-6">
                                <div class="row">
                                    <span><![CDATA[&nbsp;]]></span>
                                </div>
                                <div class="row">
                                    <span><![CDATA[&nbsp;]]></span>
                                </div>
                                <div class="row">
                                    <span><![CDATA[&nbsp;]]></span>
                                </div>
                                <div class="row">
                                    <span><![CDATA[&nbsp;]]></span>
                                </div>
                            </div>
                            <div class="col-xs-6">
                                <div class="col-xs-6" style="padding:0;margin:0;">
                                     <strong><span style="font-size:10px;">Total Barang</span></strong>
                                </div>
                                <div class="col-xs-6" style="padding:0;margin:0;">
                                    <div class="row">
                                        <strong class="pull-right"><span style="font-size:10px" > <t t-esc="int(quantity)"/> Item<![CDATA[&nbsp;]]></span></strong>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                <ul>
                                    <li style="font-size:10px"><span t-esc="o.note"/></li>
                                </ul>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </template>

        <template id="checking_external_layout_footer">
            <div class="footer">
                <div class="row">
                    <table width="100%">
                        <tr style=" border-top: 0.5pt solid black;">
                            <td><span style="font-size:6px"><![CDATA[&nbsp;]]></span></td>
                        </tr>
                    </table>
                </div>
                <div class="row">
                    <div class="col-xs-6">
                        <div class="row">
                            <span><![CDATA[&nbsp;]]></span>
                        </div>
                        <div class="row">
                            <span style="font-size:10px"><strong>Petugas Gudang</strong></span>
                        </div>
                        <div class="row">
                            <span><![CDATA[&nbsp;]]></span>
                        </div>
                        <div class="row">
                            <span><![CDATA[&nbsp;]]></span>
                        </div>
                        <div class="row">
                            <span><![CDATA[&nbsp;]]></span>
                        </div>
                        <div class="row">
                            <span><![CDATA[&nbsp;]]></span>
                        </div>
                        <div class="row">
                            <span style="font-size:10px"><strong>(...................)</strong></span>
                        </div>
                    </div>
                    <div class="col-xs-6">
                        <div class="row">
                            <div class="col-xs-6">
                                <div class="row">
                                    <span><![CDATA[&nbsp;]]></span>
                                </div>
                                <div class="row">
                                    <span><![CDATA[&nbsp;]]></span>
                                </div>
                            </div>
                            <div class="col-xs-6">
                                <div class="row">
                                    <div class="col-xs-6" style="padding:0;margin:0;">
                                        <strong><span>Total</span></strong>
                                    </div>
                                    <div class="col-xs-6" style="padding:0;margin:0;">
                                        <div class="row">
                                            <strong class="pull-right"><span t-esc="quantity"/><span>  Item<![CDATA[&nbsp;]]></span></strong>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <strong><span>Sale Note:</span></strong>
                        </div>
                        <div class="row">
                            <span t-field="o.sale_order_note"/>
                        </div>
                    </div>
                </div>
            </div>
        </template>

        <template id="report_picking_custom">
            <t t-call="report.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="jakc_stock_report.picking_external_layout">
                        <style>
                            thead { display: table-header-group }
                            tfoot { display: table-row-group }
                            tr { page-break-inside: avoid }
                        </style>
                        <div class="page">
                            <div class="row">
                                <table width="100%" t-if="not o.pack_operation_ids">
                                    <thead>
                                        <tr style="border-top:0.05pt solid black;border-bottom:0.05pt solid black;">
                                            <th><span style="font-size:10px"><strong>No</strong></span></th>
                                            <th><span style="font-size:10px"><strong>Kode Item</strong></span></th>
                                            <th><span style="font-size:10px"><strong>Lot</strong></span></th>
                                            <th><span style="font-size:10px"><strong>Nama Item</strong></span></th>
                                            <th class="text-right"><span style="font-size:10px"><strong>Jumlah</strong></span></th>
                                            <t t-if="o.picking_type_id.code != 'outgoing' and o.iface_return != True">
                                                <th>
                                                    <span style="font-size:10px"><strong>Destination</strong></span>
                                                </th>
                                            </t>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-set="no" t-value="0"/>
                                        <t t-set="quantity" t-value="0"/>
                                        <tr t-foreach="o.move_lines.sorted(key=lambda r: r.product_id.name)" t-as="move">
                                            <t t-set="no" t-value="no + 1"/>
                                            <t t-if="(o.state != 'partially_available') or (move.reserved_availability > 0)">
                                                <td><span style="font-size:10px" t-esc="no"/></td>
                                                <td>
                                                    <span style="font-size:10px" t-field="move.product_id.default_code"/>
                                                </td>
                                                    <td>
                                                        <t t-foreach="move.reserved_quant_ids" t-as="reserved_quant_id">
                                                            <span t-field="reserved_quant_id.lot_id"/>
                                                        </t>
                                                        <t t-foreach="move.quant_ids" t-as="quant_id">
                                                            <span t-field="quant_id.lot_id"/>
                                                        </t>
                                                        <!--
                                                        <t t-if="len(move.reserved_quant_ids) > 0">

                                                            <span style="font-size:10px" t-field="move.reserved_quant_ids[0].lot_id"/>
                                                        </t>
                                                        -->
                                                        <!--
                                                        <t t-if="len(move.quant_ids) > 0">
                                                            <span style="font-size:10px" t-field="move.quant_ids[0].lot_id"/>
                                                        </t>
                                                        -->
                                                    </td>
                                                <td>
                                                    <span style="font-size:10px" t-field="move.product_id.name"/> -
                                                    <span style="font-size:10px" t-field="move.product_id.merk_id"/> -
                                                    <span style="font-size:10px" t-field="move.product_id.warna"/> -
                                                    <span style="font-size:10px" t-field="move.product_id.page"/>
                                                </td>
                                                <td class="text-right">
                                                    <t t-if="o.state == 'partially_available'">
                                                        <t t-set="quantity" t-value="quantity + move.reserved_availability"/>
                                                        <span style="font-size:10px" t-esc="int(move.reserved_availability)"/> <span t-field="move.product_id.uom_id" groups="product.group_uom"/>
                                                    </t>
                                                    <t t-if="o.state != 'partially_available'">
                                                        <t t-set="quantity" t-value="quantity + move.product_uom_qty"/>
                                                        <span style="font-size:10px" t-esc="int(move.product_uom_qty)"/> <span style="font-size:10px" t-field="move.product_uom" groups="product.group_uom"/>
                                                    </t>
                                                </td>
                                                <t t-if="o.picking_type_id.code != 'outgoing' and o.iface_return != True">
                                                    <td>
                                                        <span style="font-size:10px" t-field="move.location_dest_id"/>
                                                    </td>
                                                </t>
                                            </t>
                                        </tr>
                                    </tbody>
                                </table>
                                <table width="100%" t-if="o.pack_operation_ids">
                                  <thead>
                                    <tr style="border-top:0.05pt solid black;border-bottom:0.05pt solid black;">
                                        <th><span style="font-size:10px"><strong>No</strong></span></th>
                                        <th><span style="font-size:10px"><strong>Kode Item</strong></span></th>
                                            <th>
                                                <span style="font-size:10px"><strong>Lot</strong></span>
                                            </th>
                                        <th><span style="font-size:10px"><strong>Nama Item</strong></span></th>
                                        <th class="text-right"><span style="font-size:10px"><strong>Jumlah</strong></span></th>
                                        <t t-if="o.picking_type_id.code != 'outgoing' and o.iface_return != True"><th><span style="font-size:10px"><strong>Destination</strong></span></th></t>
                                    </tr>
                                  </thead>
                                    <tbody>
                                        <t t-set="no" t-value="0"/>
                                        <t t-set="quantity" t-value="0"/>
                                        <tr t-foreach="o.pack_operation_ids.sorted(key=lambda r: r.product_id.name)" t-as="pack_operation">
                                            <t t-set="no" t-value="no + 1"/>
                                            <td><span style="font-size:10px" t-esc="no"/></td>
                                            <td>
                                                <span style="font-size:10px" t-field="pack_operation.product_id.default_code"/>
                                            </td>
                                                <td>
                                                    <span style="font-size:10px" t-if="pack_operation.lot_id" t-field="pack_operation.lot_id"/>
                                                </td>
                                            <td>
                                                 <span style="font-size:10px" t-field="pack_operation.product_id.name"/> -
                                                <span style="font-size:10px" t-field="pack_operation.product_id.merk_id"/> -
                                                <span style="font-size:10px" t-field="pack_operation.product_id.warna"/> -
                                                <span style="font-size:10px" t-field="pack_operation.product_id.page"/>
                                                <t t-if="not pack_operation.product_id and pack_operation.package_id">
                                                    <span style="font-size:10px" t-field="pack_operation.package_id"/>
                                                </t>
                                            </td>
                                            <td class="text-right">
                                                <t t-set="quantity" t-value="quantity + pack_operation.product_qty"/>
                                                <span style="font-size:10px" t-esc="int(pack_operation.product_qty)"/>
                                                <span style="font-size:10px" t-field="pack_operation.product_uom_id" groups="product.group_uom"/>
                                            </td>
                                            <t t-if="o.picking_type_id.code != 'outgoing' and o.iface_return != True"><td><span t-field="pack_operation.location_dest_id"/>
                                                <span style="font-size:10px" t-if="pack_operation.result_package_id">:</span>
                                                <span style="font-size:10px" t-field="pack_operation.result_package_id"/>
                                            </td></t>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </t>
                 </t>
             </t>
        </template>

        <template id="report_picking_custom_dropshipping">
            <t t-call="report.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="jakc_stock_report.dropshipping_external_layout">
                        <div class="page">
                            <div class="row">
                                <table width="100%" t-if="not o.pack_operation_ids">
                                    <thead>
                                        <tr style="border-top:0.05pt solid black;border-bottom:0.05pt solid black;">
                                            <th><span style="font-size:10px"><strong>No</strong></span></th>
                                            <th><span style="font-size:10px"><strong>Kode Item</strong></span></th>
                                            <t t-if="o.picking_type_id.code != 'incoming'">
                                                <th><span style="font-size:10px"><strong>Lot</strong></span></th>
                                            </t>
                                            <th><span style="font-size:10px"><strong>Nama Item</strong></span></th>
                                            <th class="text-right"><span style="font-size:10px"><strong>Jumlah</strong></span></th>
                                            <t t-if="o.picking_type_id.code != 'outgoing'"><th><span style="font-size:10px"><strong>Destination</strong></span></th></t>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-set="no" t-value="0"/>
                                        <t t-set="quantity" t-value="0"/>
                                        <tr t-foreach="o.move_lines.sorted(key=lambda r: r.product_id.name)" t-as="move">
                                            <t t-if="(o.state != 'partially_available') or (move.reserved_availability > 0)">
                                                <t t-set="no" t-value="no + 1"/>
                                                <td><span style="font-size:10px" t-esc="no"/></td>
                                                <td>
                                                    <span style="font-size:10px" t-field="move.product_id.default_code"/>
                                                </td>
                                                <t t-if="o.picking_type_id.code != 'incoming'">
                                                    <td>
                                                        <t t-foreach="move.reserved_quant_ids" t-as="reserved_quant_id">
                                                            <span style="font-size:10px"  t-field="reserved_quant.lot_id"/>
                                                        </t>
                                                    </td>
                                                </t>
                                                <td>
                                                    <span style="font-size:10px" t-field="move.product_id.name"/> -
                                                    <span style="font-size:10px" t-field="move.product_id.merk_id"/> -
                                                    <span style="font-size:10px" t-field="move.product_id.warna"/> -
                                                    <span style="font-size:10px" t-field="move.product_id.page"/>
                                                </td>
                                                <td class="text-right">
                                                    <t t-if="o.state == 'partially_available'">
                                                        <t t-set="quantity" t-value="quantity + move.reserved_availability"/>
                                                        <span style="font-size:10px" t-field="move.reserved_availability"/> <span style="font-size:10px" t-field="move.product_id.uom_id" groups="product.group_uom"/>
                                                    </t>
                                                    <t t-if="o.state != 'partially_available'">
                                                        <t t-set="quantity" t-value="quantity + move.product_uom_qty"/>
                                                        <span style="font-size:10px" t-field="move.product_uom_qty"/> <span style="font-size:10px" t-field="move.product_uom" groups="product.group_uom"/>
                                                    </t>
                                                </td>
                                                <t t-if="o.picking_type_id.code != 'outgoing'"><td><span style="font-size:10px" t-field="move.location_dest_id"/></td></t>
                                            </t>
                                        </tr>
                                    </tbody>
                                </table>
                                <table width="100%" t-if="o.pack_operation_ids">
                                    <thead>
                                        <tr style="border-top:0.05pt solid black;border-bottom:0.05pt solid black;">
                                            <th><span style="font-size:10px"><strong>No</strong></span></th>
                                            <th><span style="font-size:10px"><strong>Kode Item</strong></span></th>
                                            <t t-if="o.picking_type_id.code != 'incoming'">
                                                <th><span style="font-size:10px"><strong>Lot</strong></span></th>
                                            </t>
                                            <th><span style="font-size:10px"><strong>Nama Item</strong></span></th>
                                            <th class="text-right"><span style="font-size:10px"><strong>Jumlah</strong></span></th>
                                            <t t-if="o.picking_type_id.code != 'outgoing'"><th><span style="font-size:10px"><strong>Destination</strong></span></th></t>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-set="no" t-value="0"/>
                                        <t t-set="quantity" t-value="0"/>
                                        <tr t-foreach="o.pack_operation_ids.sorted(key=lambda r: r.product_id.name)" t-as="pack_operation">
                                            <t t-set="no" t-value="no + 1"/>
                                            <td><span style="font-size:10px" t-esc="no"/></td>
                                            <td>
                                                <span style="font-size:10px" t-field="pack_operation.product_id.default_code"/>
                                            </td>
                                            <t t-if="o.picking_type_id.code != 'incoming'">
                                                <td>
                                                    <span style="font-size:10px" t-if="pack_operation.lot_id" t-field="pack_operation.lot_id"/>
                                                </td>
                                            </t>
                                            <td>
                                                <span style="font-size:10px" t-field="pack_operation.product_id.name"/> -
                                                <span style="font-size:10px" t-field="pack_operation.product_id.merk_id"/> -
                                                <span style="font-size:10px" t-field="pack_operation.product_id.warna"/> -
                                                <span style="font-size:10px" t-field="pack_operation.product_id.page"/>
                                                <t t-if="not pack_operation.product_id and pack_operation.package_id">
                                                    <span  style="font-size:10px" t-field="pack_operation.package_id"/>
                                                </t>
                                            </td>
                                            <td class="text-right">
                                                <t t-set="quantity" t-value="quantity + pack_operation.product_qty"/>
                                                <span style="font-size:10px" t-field="pack_operation.product_qty"/>
                                                <span style="font-size:10px" t-field="pack_operation.product_uom_id" groups="product.group_uom"/>
                                            </td>
                                            <t t-if="o.picking_type_id.code != 'outgoing'"><td><span style="font-size:10px" t-field="pack_operation.location_dest_id"/>
                                                <span style="font-size:10px" t-if="pack_operation.result_package_id">:</span>
                                                <span style="font-size:10px" t-field="pack_operation.result_package_id"/>
                                            </td></t>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </t>
                 </t>
             </t>
        </template>

        <template id="report_picking_custom_checking">
            <t t-call="report.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="jakc_stock_report.checking_external_layout">
                        <div class="page">
                            <div class="row">
                                <table width="100%">
                                    <thead>
                                        <tr style="border-top:0.05pt solid black;border-bottom:0.05pt solid black;">
                                            <th><span style="font-size:10px"><strong>No</strong></span></th>
                                            <th><span style="font-size:10px"><strong>Kode Item</strong></span></th>
                                            <t t-if="o.picking_type_id.code != 'incoming'">
                                                <th><span style="font-size:10px;padding-left:2px;"><strong>Lot</strong></span></th>
                                            </t>
                                            <th><span style="font-size:10px;padding-left:2px;"><strong>Nama Item</strong></span></th>
                                            <th class="text-right"><span style="font-size:10px"><strong>Jumlah</strong></span></th>
                                            <t t-if="o.picking_type_id.code != 'outgoing'">
                                                <th>
                                                    <span style="font-size:10px"><strong>Destination</strong></span>
                                                </th>
                                            </t>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-set="no" t-value="0"/>
                                        <t t-set="quantity" t-value="0"/>
                                        <tr t-foreach="o.move_lines.sorted(key=lambda r: r.product_id.name)" t-as="move">
                                            <t t-set="no" t-value="no + 1"/>
                                            <t t-if="(o.state != 'partially_available') or (move.reserved_availability > 0)">
                                                <td><span style="font-size:10px" t-esc="no"/></td>
                                                <td>
                                                    <span style="font-size:10px" t-field="move.product_id.default_code"/>
                                                </td>
                                                <t t-if="o.picking_type_id.code != 'incoming'">
                                                    <td>
                                                        <t t-if="move.procurement_id.sale_line_id.lot_id">
                                                            <span style="font-size:10px;" t-field="move.procurement_id.sale_line_id.lot_id"/>
                                                        </t>
                                                        <t t-if="not move.procurement_id.sale_line_id.lot_id">
                                                            <t t-foreach="move.reserved_quant_ids" t-as="reserved_quant_id">
                                                                <span style="font-size:10px;" t-field="reserved_quant_id.lot_id"/>
                                                            </t>
                                                            <t t-foreach="move.quant_ids" t-as="quant_id">
                                                                <span style="font-size:10px;" t-field="quant_id.lot_id"/>
                                                            </t>
                                                        </t>
                                                    </td>
                                                </t>
                                                <td><span style="font-size:10px;border-left:1px solid black;padding-left:2px;" t-field="move.product_id.name"/></td>
                                                <td class="text-right">
                                                    <t t-set="quantity" t-value="quantity + move.product_uom_qty"/>
                                                    <span style="font-size:10px" t-esc="int(move.product_uom_qty)"/> <span style="font-size:10px" t-field="move.product_uom" groups="product.group_uom"/>
                                                </td>
                                                <t t-if="o.picking_type_id.code != 'outgoing'">
                                                    <td>
                                                        <span style="font-size:10px" t-field="move.location_dest_id"/>
                                                    </td>
                                                </t>
                                            </t>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </t>
                 </t>
             </t>
        </template>
    </data>
</openerp>